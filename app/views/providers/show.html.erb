<% if can? :read, @provider %>
  <div class="row">
    <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 col-xs-offset-0 col-sm-offset-0 col-md-offset-3 col-lg-offset-3 toppad" >
      <div class="panel panel-info">
        <div class="panel-heading">
          <h3 class="panel-title"><%= @provider.full_name %></h3>
        </div>
        <div class="panel-body">
          <div class="row">
              <div class="col-md-3 col-lg-3 " align="center">
                <% if @provider.image? %>
                   <%= image_tag @provider.image_url(:thumb), :class => "profile_image" %>
                <% else %>
                   <img alt="User Pic" src="https://lh5.googleusercontent.com/-b0-k99FZlyE/AAAAAAAAAAI/AAAAAAAAAAA/eu7opA4byxI/photo.jpg?sz=100" class="img-circle">
                <% end %>
              </div>
              <div class=" col-md-9 col-lg-9 ">
                <table class="table table-user-information">
                  <tbody>
                    <tr>
                      <td><%= t(:profession) %></td>
                      <td><%= @provider.profession_list %></td>
                    </tr>
                    <tr>
                      <td><%= t(:experience) %></td>
                      <td><%= @provider.experience %></td>
                    </tr>
                    <tr>
                      <td><%= t(:phone) %></td>
                      <td><%= @provider.contact %><br><br>
                      </td>
                    </tr>

                  </tbody>
                </table>

                <a href="#" class="btn btn-primary">Me interessa!</a>
                <a href="#" class="btn btn-primary">Pedir orçamento</a>
              </div>
            </div>
          </div>
          <div class="panel-footer">
              <%= mail_to @provider.email, { class: "btn btn-sm btn-primary" } do %>
                <i class="glyphicon glyphicon-envelope"></i>
              <% end %>
              <span class="pull-right">
                <% if can? :update, @provider %>
                  <%= link_to edit_provider_path ,class: "btn btn-sm btn-warning" do %>
                    <i class="glyphicon glyphicon-edit" alt="t('links.edit')"></i>
                  <% end %>
                <% end %>
                <% if can? :destroy, @provider %>
                  <a data-original-title="Remove this user" data-toggle="tooltip" type="button" class="btn btn-sm btn-danger"><i class="glyphicon glyphicon-remove"></i></a>
                <% end %>
              </span>
          </div>
          <ul class="nav nav-tabs">
            <li class="active"><a data-toggle="tab" href="#add">
              Endereços  <span class="badge"><%= @provider.addresses.count %></a>
            </li>
            <li>
              <a data-toggle="tab" href="#comment">Recomedação <span class="badge">
                <%= @provider.recommendations.count %></a>
            </li>
          </ul>
          <div class="tab-content">
            <div id="add" class="tab-pane fade in active">
              <% @provider.addresses.each do |address| %>
                  <div class="row" id="address_show">
                    <div class="col-md-12">
                       <div class="col-md-4">
                         <address>
                          <strong></strong><br>
                              <%= address.city %>, <%= address.zipcode %><br>
                              <abbr title="telefone">Fone:</abbr> <%= address.phone %>
                              <%= mail_to address.email, { class: "btn btn-sm btn-primary" } do %>
                                <i class="glyphicon glyphicon-envelope"></i>
                              <% end %>
                         </address>
                       </div>
                       <div id="map" class="col-md-8">
                          <%= image_tag "http://maps.google.com/maps/api/staticmap?size=300x300&sensor=false&zoom=16&markers=#{address.latitude}%2C#{address.longitude}" %>
                           </div>
                        </div>
                      </div>
              <% end %>
            </div>
            <div id="comment" ng-controller="RecommendationCtrl" data-param= <%=@provider.id  %> class="tab-pane fade">
              <form novalidate  class="form-horizontal" role="form">
                  Assunto: <input type="text" ng-model="recommendation.title" name="title"/><br/>
                  Comentário: <textarea ng-model="recommendation.comment" /></textarea><br />
                  <div ng-model="recommendation.rating" id="rate"> </div>
                  <input type="submit" class="btn btn-success btn-circle text-uppercase" ng-click="save(recommendation)" value="Save" />
              </form>

                <ul class="media-list" ng-repeat="rec in recommendations">
                  <li class="media">
                    <a class="pull-left" href="#">
                      <img class="media-object img-circle" ng-src="{{rec.customer.image['thumb'].url}}" alt="profile"></img>
                    </a>
                    <div class="media-body">
                      <div class="well well-lg">
                          <h4 class="media-heading text-uppercase reviews">{{rec.title }}
                            <small> {{rec.customer.full_name }} </small> </h4>
                          <ul class="media-date text-uppercase reviews list-inline">
                             <div data-score="{{rec.rating}}" id="score"></div>
                          </ul>

                          <p class="media-comment">
                            {{rec.comment}}
                          </p>
                      </div>
                    </div>
                 </li>
               </ul>

            </div>
         </div>

      </div>
    </div>
  </div>


<% end %>

